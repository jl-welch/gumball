!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";var o=function(e,t){for(var n=0;n<e.length;n+=1){if(t(e[n],n))break}},a=function(e){var t=e.getAttribute("data-target");if(!t||"#"===t){var n=e.getAttribute("href");t=n&&"#"!==n?n.trim():null}return document.querySelector(t)?t:null},c=function(e){return(e[0]||e).nodeType};function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function e(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var h=new Map,t="aria-expanded",n="collapse",i="collapse--show",r="collapsing",g="[data-toggle='collapse']",l=function(){function l(e){if(u(this,l),!c(e))throw new TypeError("Element expected");var n,t,s,i;this._element=e,this._togglers=(n=e,t=g,s=document.querySelectorAll(t),i=[],o(s,function(e){var t=a(e);t&&Array.from(document.querySelectorAll(t)).filter(function(e){return e===n}).length&&i.push(e)}),i.length?i:null),this._collapsing=!1,h.set(e,this)}return e(l,[{key:"toggle",value:function(){var e=this._element.classList.contains(i)?"hide":"show";this[e]()}},{key:"show",value:function(){this._collapsing||this._element.classList.contains(i)||(this._element.classList.remove(n),this._element.classList.add(r),this._setCollapsing(!0),o(this._togglers,function(e){return e.setAttribute(t,!0)}),this._element.addEventListener("transitionend",this._showCollapseEnd),this._element.style.height="".concat(this._element.scrollHeight,"px"))}},{key:"hide",value:function(){!this._collapsing&&this._element.classList.contains(i)&&(this._element.style.height="".concat(this._element.scrollHeight,"px"),this._element.offsetHeight,this._element.classList.remove(n,i),this._element.classList.add(r),this._setCollapsing(!0),o(this._togglers,function(e){e.querySelectorAll(".".concat(i)).length||e.setAttribute(t,!1)}),this._element.style.height="",this._element.addEventListener("transitionend",this._hideCollapseEnd))}},{key:"dispose",value:function(){h.delete(this._element),this._element=null,this._togglers=null,this._collapsing=null}},{key:"_setCollapsing",value:function(e){this._collapsing=e}},{key:"_showCollapseEnd",value:function(){this._element.classList.remove(r),this._element.classList.add(n,i),this._element.style.height="",this._element.removeEventListener("transitionend",this._showCollapseEnd),this._setCollapsing(!1)}},{key:"_hideCollapseEnd",value:function(){this._element.classList.remove(r),this._element.classList.add(n),this._element.removeEventListener("transitionend",this._hideCollapseEnd),this._setCollapsing(!1)}}],[{key:"_toggle",value:function(e){var t=h.get(e);t||(t=new l(e)),t.toggle()}}]),l}();document.addEventListener("click",function(e){var t=e.target.closest(g);if(t){"A"===t.tagName&&e.preventDefault();var n=a(t),s=document.querySelector(n);l._toggle(s)}});var d="aria-expanded",_="dropdown",f="dropdown__toggle",v="dropdown__list",m="dropdown__list--show",p="dropdown__item",y='[data-toggle="dropdown"]',w=function(){function r(e){if(u(this,r),!c(e))throw new TypeError("Element expected");this._toggler=e,this._menu=r._getMenu(this._toggler),h.set(e,this)}return e(r,[{key:"toggle",value:function(){if(this._menu){this._toggler.focus();var e=this._menu.classList.contains(m)?"hide":"show";this[e]()}}},{key:"show",value:function(){this._menu.classList.contains(m)||(r._clearActive(),this._menu.classList.add(m),this._toggler.setAttribute(d,!0))}},{key:"hide",value:function(){this._menu.classList.contains(m)&&(this._menu.classList.remove(m),this._toggler.setAttribute(d,!1))}}],[{key:"_getActiveToggler",value:function(){var t=document.querySelector(".".concat(m));if(!t)return null;var n=null,e=document.querySelectorAll(y);return o(e,function(e){return document.querySelector(a(e))===t&&(n=e,!0)}),n}},{key:"_getToggler",value:function(e){return e.classList.contains(f)?e:e.closest(".".concat(_)).querySelector(y)}},{key:"_getMenu",value:function(e){var t=a(e);return document.querySelector(t)}},{key:"_clearActive",value:function(){var e=document.querySelector(".".concat(m));if(e){var t=r._getToggler(e);e.classList.remove(m),t.setAttribute(d,!1)}}},{key:"_keyDownHandler",value:function(e){var t=e.key,n=e.target;if("Escape"===t||"ArrowUp"===t||"ArrowDown"===t){var s=r._getToggler(n);if("Escape"===t)return r._clearActive(),void s.focus();var i=r._getMenu(s),l=Array.from(i.querySelectorAll(".".concat(p)));if(l.length)if(i.classList.contains(m)||s.click(),n!==s){var o=l.indexOf(n);"ArrowUp"===t&&0<o&&(o-=1),"ArrowDown"===t&&o<l.length-1&&(o+=1),l[o].focus()}else l[0].focus()}}},{key:"_toggle",value:function(e){var t=e.target.closest(y);if(t){"A"!==t.tagName||t.getAttribute("data-follow")||e.preventDefault();var n=h.get(t);n||(n=new r(t)),n.toggle()}else{e.target.closest(".".concat(v))||r._clearActive()}}}]),r}();document.addEventListener("keydown",w._keyDownHandler),document.addEventListener("click",w._toggle)});