!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";function s(e,t){for(var n=0;n<e.length;n+=1){if(t(e[n],n))break}}function l(e){var t=e.getAttribute("data-target");if(!t||"#"===t){var n=e.getAttribute("href");t=n&&"#"!==n?n.trim():null}return document.querySelector(t)?t:null}function t(e){return(e[0]||e).nodeType}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function e(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var a=new Map,r="aria-expanded",c="collapse",u="collapse--show",h="collapsing",g="[data-toggle='collapse']",d=function(){function n(e){if(i(this,n),!t(e))throw new TypeError("Element expected");this._element=e,this._togglers=function(n,e){var t=document.querySelectorAll(e),i=[];return s(t,function(e){var t=l(e);t&&Array.from(document.querySelectorAll(t)).filter(function(e){return e===n}).length&&i.push(e)}),i.length?i:null}(e,g),this._collapsing=!1,a.set(e,this)}return e(n,[{key:"toggle",value:function(){var e=this._element.classList.contains(u)?"hide":"show";this[e]()}},{key:"show",value:function(){this._collapsing||this._element.classList.contains(u)||(this._element.classList.remove(c),this._element.classList.add(h),this._setCollapsing(!0),s(this._togglers,function(e){return e.setAttribute(r,!0)}),this._element.addEventListener("transitionend",this._showCollapseEnd),this._element.style.height="".concat(this._element.scrollHeight,"px"))}},{key:"hide",value:function(){!this._collapsing&&this._element.classList.contains(u)&&(this._element.style.height="".concat(this._element.scrollHeight,"px"),function(e){e.offsetHeight}(this._element),this._element.classList.remove(c,u),this._element.classList.add(h),this._setCollapsing(!0),s(this._togglers,function(e){e.querySelectorAll(".".concat(u)).length||e.setAttribute(r,!1)}),this._element.style.height="",this._element.addEventListener("transitionend",this._hideCollapseEnd))}},{key:"dispose",value:function(){a.delete(this._element),this._element=null,this._togglers=null,this._collapsing=null}},{key:"_setCollapsing",value:function(e){this._collapsing=e}},{key:"_showCollapseEnd",value:function(){this._element.classList.remove(h),this._element.classList.add(c,u),this._element.style.height="",this._element.removeEventListener("transitionend",this._showCollapseEnd),this._setCollapsing(!1)}},{key:"_hideCollapseEnd",value:function(){this._element.classList.remove(h),this._element.classList.add(c),this._element.removeEventListener("transitionend",this._hideCollapseEnd),this._setCollapsing(!1)}}],[{key:"_toggle",value:function(e){var t=a.get(e);(t=t||new n(e)).toggle()}}]),n}();document.addEventListener("click",function(e){var t=e.target.closest(g);if(t){"A"===t.tagName&&e.preventDefault();var n=l(t),i=document.querySelector(n);d._toggle(i)}});var n="aria-expanded",_="dropdown",f="dropdown__toggle",v="dropdown__list",m="dropdown__list--show",p="dropdown__item",y='[data-toggle="dropdown"]',w=function(){function r(e){if(i(this,r),!t(e))throw new TypeError("Element expected");this._toggler=e,this._menu=r._getMenu(this._toggler),a.set(e,this)}return e(r,[{key:"toggle",value:function(){if(this._menu){this._toggler.focus();var e=this._menu.classList.contains(m)?"hide":"show";this[e]()}}},{key:"show",value:function(){this._menu.classList.contains(m)||(r._clearActive(),this._menu.classList.add(m),this._toggler.setAttribute(n,!0))}},{key:"hide",value:function(){this._menu.classList.contains(m)&&(this._menu.classList.remove(m),this._toggler.setAttribute(n,!1))}}],[{key:"_getActiveToggler",value:function(){var t=document.querySelector(".".concat(m));if(!t)return null;var n=null,e=document.querySelectorAll(y);return s(e,function(e){return document.querySelector(l(e))===t&&(n=e,!0)}),n}},{key:"_getToggler",value:function(e){return e.classList.contains(f)?e:e.closest(".".concat(_)).querySelector(y)}},{key:"_getMenu",value:function(e){var t=l(e);return document.querySelector(t)}},{key:"_clearActive",value:function(){var e=document.querySelector(".".concat(m));if(e){var t=r._getToggler(e);e.classList.remove(m),t.setAttribute(n,!1)}}},{key:"_keyDownHandler",value:function(e){var t=e.key,n=e.target;if("Escape"===t||"ArrowUp"===t||"ArrowDown"===t){var i=r._getToggler(n);if("Escape"===t)return r._clearActive(),void i.focus();var s=r._getMenu(i),l=Array.from(s.querySelectorAll(".".concat(p)));if(l.length)if(s.classList.contains(m)||i.click(),n!==i){var o=l.indexOf(n);"ArrowUp"===t&&0<o&&(o-=1),"ArrowDown"===t&&o<l.length-1&&(o+=1),l[o].focus()}else l[0].focus()}}},{key:"_toggle",value:function(e){var t=e.target.closest(y);if(t){"A"!==t.tagName||t.getAttribute("data-follow")||e.preventDefault();var n=a.get(t);(n=n||new r(t)).toggle()}else{e.target.closest(".".concat(v))||r._clearActive()}}}]),r}();document.addEventListener("keydown",w._keyDownHandler),document.addEventListener("click",w._toggle)});